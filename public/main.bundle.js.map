{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/main.js","webpack:///./src/physics.js","webpack:///./src/utils/chron.js","webpack:///./src/utils/geom.js","webpack:///./src/utils/lcg.js"],"names":["physics","require","geom","chron","LCG","canvas","document","getElementById","ctx","getContext","here","location","tps","TICKS_PER_SECOND","GRID_SIZE","TURN_UNIT","Math","PI","TICK_MS","PLANET_SPIN_SPEED","BASE_SELF","dead","posX","posY","velX","velY","lcg","inGame","ws","token","self","firing","accel","accelStart","brake","turn_left","turn_right","ships","bullets","turn_left_ramp","turn_right_ramp","lines","planets","tpf","planetAngle","playerCount","leaderboard","rubber","no_data","pinger","planetSeed","dialogOpacity","damageAlpha","damageGot","last_partial","send_turn","style","animation","opacity","isMobile","test","navigator","userAgent","checkSize","display","addEventListener","showDialog","body","position","overflow","hideDialog","hideLose","joinGame","textContent","wsproto","protocol","replace","port","WebSocket","hostname","pathname","e","msg","data","cmd","args","split","join","nick","value","trim","length","random","toString","send","now","performance","max","JSON","parse","toFixed","obj","abs","score","name","health","latched","getPlanetSeed","setPlanetSeed","getPlanets","width","drawLeaderboard","orient","parseFloat","leaveGame","explosion","innerHTML","matching","find","ship","_id","filter","bullet","console","log","setInterval","clearInterval","close","makeTd","text","td","createElement","makeTableRow","lb","tr","appendChild","leaderBoardTable","newBody","i","min","replaceChild","childNodes","serverTick","stringify","timeMs","lastFired","DELAY_BETWEEN_BULLETS_MS","recoil","inertia","rubberband","gravityShip","gravityBullet","partialTick","delta","jouter","jbase","jstick","applyPosition","hjbw","offsetWidth","hjbh","offsetHeight","x","offsetLeft","sqrt","y","offsetTop","h","hypot","willAccel","shouldUpdateAccelStart","angle","atan2","resetJoystickCenter","top","left","pageX","pageY","pressure","stopPropagation","stopImmediatePropagation","window","code","drawShip","scale","cx","cy","height","p1","p2","p3","p4","getShipPoints","x1","y1","x2","y2","x3","y3","x4","y4","x0","y0","strokeStyle","beginPath","moveTo","lineTo","stroke","tp1","tp2","tp3","tp4","tp5","getThrusterPoints","x5","y5","xo","yo","font","fillStyle","textAlign","fillText","drawBullet","arc","fill","drawLine","line","r","alpha","xr","cos","yr","sin","createLine","xv","yv","vx","vy","vangle","computePlanetAngle","planet","radius","drawPlanet","lineWidth","reseed","seed","gon","randomInt","randomOffset","x6","y6","push","frame","time","innerWidth","innerHeight","unitSize","MAX_BULLET_DISTANCE","xm","ym","fillRect","dx","dy","gradient","createRadialGradient","RUBBERBAND_BUFFER","addColorStop","rect","bgradient","color","background","t","requestAnimationFrame","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","GRAV","MAX_SHIP_VELOCITY","MIN_SHIP_VELOCITY","LATCH_VELOCITY","BULLET_VELOCITY","BRAKE_MUL","INERTIA_MUL","PLANET_CHUNK_SIZE","PLANET_SEED","getAccelMul","accelTimeMs","checkMinVelocity","v","checkMaxVelocity","maxvel","healthToVelocity","newPlanetSeed","floor","getPlanetsForChunk","xb","yb","xu","yu","accelMul","d","r2","f","getRubberbandRadius","pow","distCenter","maxRadius","baseX","baseY","module","exports","Date","getTime","EPSILON","pointInTriangle","p","xp","yp","c1","c2","c3","handleZeroEpsilon","pointOrientation","q","sign","onCollinearSegment","lineIntersectsLine","a1","a2","b1","b2","o1","o2","o3","o4","lineIntersectsTriangle","l1","l2","t1","t2","t3","wrapRadianAngle","getPlanetAngleMultiplier","vel","diff","sc","rotatePoint","s","c","rotatePointOffset","getRealShipPoints","points","getCollisionPoints","LCG_A","LCG_C","Generator","constructor","val"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/main.js\");\n","const physics = require('../src/physics')\nconst geom = require('../src/utils/geom')\nconst chron = require('../src/utils/chron')\nconst LCG = require('../src/utils/lcg')\nconst canvas = document.getElementById('screen')\nconst ctx = canvas.getContext('2d')\nconst here = document.location\nconst tps = physics.TICKS_PER_SECOND\nconst GRID_SIZE = 10\nconst TURN_UNIT = 2 * Math.PI / tps\nconst TICK_MS = 1000 / tps\nconst PLANET_SPIN_SPEED = 0.02\nconst BASE_SELF = { dead: true, posX: 0, posY: 0, velX: 0, velY: 0 }\n\nlet lcg = new LCG(0)\nlet inGame = false\nlet ws = null\nlet token = null\nlet self = BASE_SELF\nlet firing = false\nlet accel = false\nlet accelStart = 0\nlet brake = false\nlet turn_left = false\nlet turn_right = false\nlet dead = false\nlet ships = []\nlet bullets = []\nlet turn_left_ramp = 0\nlet turn_right_ramp = 0\nlet lines = []\nlet planets = []\nlet tpf = 1\nlet planetAngle = 0\nlet playerCount = 1\nlet leaderboard = []\nlet rubber = 150\nlet no_data = 0\nlet pinger = null\nlet planetSeed = 0\nlet dialogOpacity = 0\nlet damageAlpha = 0\nlet damageGot = 0\n\nlet last_partial = null\nlet send_turn = false\n\ndocument.getElementById('scoreanimation').style.animation = 'none'\ndocument.getElementById('scoreanimation').style.opacity = '0'\n\nconst isMobile = () => {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\n}\n\nconst checkSize = () => {\n  if (dead) {\n    document.getElementById('mobilecontrols').style.display = 'none'\n  } else {\n    document.getElementById('mobilecontrols').style.display = isMobile() ? 'block' : 'none'\n  }\n}\n\ndocument.addEventListener('resize', () => checkSize())\ncheckSize()\n\nconst showDialog = () => {\n  dialogOpacity = 0\n  document.getElementById('dialogbox').style.opacity = '0'\n  document.getElementById('dialog').style.display = 'block'\n  document.getElementById('stats').style.display = 'none'\n  document.getElementById('finalscore').style.display = 'block'\n  document.body.style.position = 'absolute'\n  document.body.style.overflow = ''\n}\n\nconst hideDialog = () => {\n  document.getElementById('dialog').style.display = 'none'\n  document.getElementById('stats').style.display = 'block'\n  document.body.style.position = 'relative'\n  document.body.style.overflow = 'hidden'\n}\n\nconst hideLose = () => {\n  document.getElementById('defeat').style.display = 'none'\n  document.getElementById('defeatcrash').style.display = 'none'\n  document.getElementById('defeatplanet').style.display = 'none'\n  document.getElementById('defeatname').style.display = 'none'\n  document.getElementById('disconnected').style.display = 'none'\n  document.getElementById('finalscore').style.display = 'none'\n}\n\nconst joinGame = () => {\n  if (!inGame) {\n    document.getElementById('scoreanimation').style.animation = 'none'\n    document.getElementById('scoreanimation').style.opacity = '0'\n    document.getElementById('onlinestatus').textContent = 'connecting'\n    hideDialog()\n\n    lines = []\n\n    let wsproto = here.protocol.replace('http', 'ws')\n    let port = here.port\n    if (port) {\n      port = `:${port}`\n    }\n    ws = new WebSocket(`${wsproto}//${here.hostname}${port}${here.pathname}`)\n    inGame = true\n\n    ws.addEventListener('message', (e) => {\n      const msg = e.data\n\n      let [cmd, ...args] = msg.split(' ')\n      args = args.join(' ')\n\n      if (cmd === 'your_token') {\n        document.getElementById('onlinestatus').textContent = 'in game'\n        token = args\n        let nick = document.getElementById('nick').value.trim()\n        if (nick.length < 1) {\n          nick = ((100000000 * Math.random()) | 0).toString()\n        }\n        send(`nick ${nick}`)\n      } else if (cmd === 'pong') {\n        const now = performance.now()\n        document.getElementById('onlinestatus').textContent = `in game, ping: ${Math.max(now - JSON.parse(args), 0).toFixed(1)}ms`\n      } else if (cmd === 'data') {\n        no_data = 0\n        let obj = null;\n        [obj, ships, bullets, playerCount, rubber, planetSeed] = JSON.parse(args)\n        if (self.dead) {\n          self = obj\n          self.dead = false\n        } else {\n          if (Math.abs(obj.posX - self.posX) > 0.3) {\n            self.posX = (self.posX + obj.posX) / 2\n            self.velX = (self.velX + obj.velX) / 2\n          }\n          if (Math.abs(obj.posY - self.posY) > 0.3) {\n            self.posY = (self.posY + obj.posY) / 2\n            self.velY = (self.velY + obj.velY) / 2\n          }\n          if (Math.abs(obj.velX - self.velX) > 0.2) {\n            self.velX = obj.velX\n          }\n          if (Math.abs(obj.velY - self.velY) > 0.2) {\n            self.posY = obj.posY\n          }\n          if (!accel && obj.accel !== null) {\n            send_turn = true\n          } else if (accel && obj.accel === null) {\n            send_turn = true\n          } else if (!brake && obj.brake !== null) {\n            send_turn = true\n          } else if (brake && obj.brake === null) {\n            send_turn = true\n          }\n          document.getElementById('yourscore').textContent \n            = document.getElementById('scoreanimation').textContent \n            = document.getElementById('finalscorenum').textContent \n            = obj.score\n          if (obj.score > self.score) {\n            document.getElementById('scoreanimation').style.opacity = '1'\n            document.getElementById('scoreanimation').style.animation = 'none'\n            document.getElementById('scoreanimation').style.animation = ''\n          }\n          self.name = obj.name\n          self.score = obj.score\n          self.dead = obj.dead\n          if (obj.health < self.health) {\n            damageAlpha = 0.8 * (self.health - obj.health)\n            damageGot = performance.now() + (self.health - obj.health) * 2\n          }\n          self.health = obj.health\n          self.latched = obj.latched\n        }\n        if (physics.getPlanetSeed() != planetSeed) {\n          physics.setPlanetSeed(planetSeed)\n          planets = physics.getPlanets(self.posX, self.posY)\n        }\n        physics.setPlanetSeed(planetSeed)\n        document.getElementById('playerCountNum').textContent = playerCount\n        document.getElementById('healthbarhealth').style.width = `${0 | (self.health * 200)}px`\n      } else if (cmd === 'leaderboard') {\n        leaderboard = JSON.parse(args)\n        drawLeaderboard()\n      } else if (cmd === 'set_orient') {\n        self.orient = parseFloat(args)\n      } else if (cmd === 'unrecognized') {\n        leaveGame()\n      } else if (cmd === 'defeated') {\n        explosion(self)\n        hideLose()\n        leaveGame()\n        document.getElementById('defeat').style.display = 'inline'\n        document.getElementById('defeatname').style.display = 'inline'\n        document.getElementById('defeatname').innerHTML = args\n      } else if (cmd === 'defeated_collision') {\n        explosion(self)\n        hideLose()\n        leaveGame()\n        document.getElementById('defeatcrash').style.display = 'inline'\n        document.getElementById('defeatname').style.display = 'inline'\n        document.getElementById('defeatname').innerHTML = args\n      } else if (cmd === 'defeated_planet') {\n        explosion(self)\n        hideLose()\n        leaveGame()\n        document.getElementById('defeatplanet').style.display = 'inline'\n      } else if (cmd === 'kill_ship') {\n        const matching = ships.find(ship => ship._id === args)\n        if (matching !== null) {\n          explosion(matching)\n        }\n        ships = ships.filter(ship => ship._id !== args)\n      } else if (cmd === 'remove_ship') {\n        ships = ships.filter(ship => ship._id !== args)\n      } else if (cmd === 'remove_bullet') {\n        bullets = bullets.filter(bullet => bullet._id !== args)\n      } else {\n        console.log('unknown cmd', cmd)\n      }\n    })\n    \n    ws.addEventListener('open', () => {\n      dead = false\n      document.getElementById('onlinestatus').textContent = 'waiting for spawn'\n      ws.send('join')\n      checkSize()\n      pinger = setInterval(() => {\n        if (++no_data > 8) {\n          hideLose()\n          document.getElementById('disconnected').style.display = 'inline'\n          leaveGame()\n        }\n        ws.send('ping ' + performance.now())\n      }, 1000)\n    })\n    \n    ws.addEventListener('close', () => {\n      if (!dead) {\n        hideLose()\n        document.getElementById('disconnected').style.display = 'inline'\n        leaveGame()\n      }\n      dead = true\n    })\n  }\n}\n\nconst leaveGame = () => {\n  if (pinger !== null) {\n    clearInterval(pinger)\n    pinger = null\n  }\n  if (ws !== null) {\n    ws.close()\n  }\n  token = null\n  dead = self.dead = true\n  ws = null\n  inGame = accel = brake = turn_left = turn_right = firing = false\n  damageGot = damageAlpha = 0\n  document.getElementById('onlinestatus').textContent = 'offline'\n  showDialog()\n  checkSize()\n}\n\nconst send = (msg) => {\n  if (token) {\n    ws.send(`${token} ${msg}`)\n  }\n}\n\nconst makeTd = (text) => {\n  const td = document.createElement('td')\n  td.textContent = text\n  return td\n}\n\nconst makeTableRow = (lb) => {\n  const tr = document.createElement('tr')\n  tr.appendChild(makeTd(lb[0]))\n  tr.appendChild(makeTd(lb[1]))\n  return tr\n}\n\nconst drawLeaderboard = () => {\n  const leaderBoardTable = document.getElementById('leaderboard')\n  const newBody = document.createElement('tbody')\n  \n  for (let i = 0; i < Math.min(10, leaderboard.length); ++i) {\n    newBody.appendChild(makeTableRow(leaderboard[i]))\n  }\n\n  leaderBoardTable.replaceChild(newBody, leaderBoardTable.childNodes[0])\n}\n\nconst serverTick = () => {\n  if (!ws || !self) {\n    self.velX *= 0.95\n    self.velY *= 0.95\n    return\n  }\n\n  if (send_turn) {\n    send(`control ${JSON.stringify([self.orient, accel, brake, firing])}`)\n    send_turn = false\n  }\n  \n  if (accel) {\n    physics.accel(self, chron.timeMs() - accelStart)\n  }\n  if (brake) {\n    physics.brake(self)\n  }\n  if (firing && (chron.timeMs() - self.lastFired) >= physics.DELAY_BETWEEN_BULLETS_MS) {\n    physics.recoil(self)\n  }\n  physics.inertia(self)\n  if (!self.latched) {\n    physics.rubberband(self, rubber)\n    planets = physics.getPlanets(self.posX, self.posY)\n    physics.gravityShip(self, planets)\n  }\n\n  for (const bullet of bullets) {\n    physics.gravityBullet(bullet, physics.getPlanets(bullet.posX, bullet.posY))\n  }\n}\nsetInterval(serverTick, TICK_MS)\n\nconst partialTick = (delta) => {\n  tpf = 1.0 * delta / TICK_MS\n\n  if (!self.latched) {\n    // turning\n    if (turn_left && !turn_right) {\n      self.orient -= turn_left_ramp * TURN_UNIT * tpf\n      turn_left_ramp = Math.min(1, turn_left_ramp + tpf * 0.1)\n      accelStart = chron.timeMs()\n      send_turn = true\n    } else if (turn_right && !turn_left) {\n      self.orient += turn_right_ramp * TURN_UNIT * tpf\n      turn_right_ramp = Math.min(1, turn_right_ramp + tpf * 0.1)\n      accelStart = chron.timeMs()\n      send_turn = true\n    }\n  }\n  \n  // interpolate\n  self.posX += tpf * self.velX\n  self.posY += tpf * self.velY\n\n  for (const ship of ships) {\n    ship.posX += tpf * ship.velX\n    ship.posY += tpf * ship.velY\n  }\n  for (const bullet of bullets) {\n    bullet.posX += tpf * bullet.velX\n    bullet.posY += tpf * bullet.velY\n  }\n}\n\nconst jouter = document.getElementById('joystickouter')\nconst jbase = document.getElementById('joystickbase')\nconst jstick = document.getElementById('joystick')\n\nconst applyPosition = () => {\n  if (dead || self === null) {\n    return\n  }\n\n  const hjbw = jbase.offsetWidth / 2\n  const hjbh = jbase.offsetHeight / 2\n  let x = (jstick.offsetLeft + (jstick.offsetWidth / 2) - (jbase.offsetLeft + hjbw)) / hjbw * Math.sqrt(2)\n  let y = (jstick.offsetTop + (jstick.offsetHeight / 2) - (jbase.offsetTop + hjbh)) / hjbh * Math.sqrt(2)\n  if (x > 1) x = 1\n  if (x < -1) x = -1\n  if (y > 1) y = 1\n  if (y < -1) y = -1\n\n  const h = Math.hypot(x, y)\n  \n  const willAccel = h > 0.8\n  let shouldUpdateAccelStart = willAccel != accel\n\n  if (!self.latched && h > 0.01) {\n    const angle = Math.atan2(x, -y)\n    shouldUpdateAccelStart |= self.orient != angle\n    self.orient = angle \n  }\n\n  accel = willAccel\n  if (shouldUpdateAccelStart) {\n    accelStart = chron.timeMs()\n    send_turn = true\n  }\n}\n\nconst resetJoystickCenter = () => {\n  jstick.style.top = jbase.offsetTop + (jbase.offsetHeight / 2) - (jstick.offsetHeight / 2) + 'px'\n  jstick.style.left = jbase.offsetLeft + (jbase.offsetWidth / 2) - (jstick.offsetWidth / 2) + 'px'\n  applyPosition()\n}\n\nresetJoystickCenter()\n\njbase.addEventListener('pointerdown', (e) => {\n  jstick.style.left = e.pageX - (jstick.offsetWidth / 2) + 'px'\n  jstick.style.top = e.pageY - (jstick.offsetHeight / 2) + 'px'\n  applyPosition()\n})\n\njbase.addEventListener('pointermove', (e) => {\n  if (e.pressure > 0) {\n    jstick.style.left = e.pageX - (jstick.offsetWidth / 2) + 'px'\n    jstick.style.top = e.pageY - (jstick.offsetHeight / 2) + 'px'\n    applyPosition()\n  }\n})\n\njbase.addEventListener('pointerout', (e) => {\n  e.stopPropagation()\n  e.stopImmediatePropagation()\n})\n\njstick.addEventListener('pointerout', (e) => {\n  e.stopPropagation()\n  e.stopImmediatePropagation()\n})\n\njouter.addEventListener('pointerout', () => {\n  console.log('out')\n  resetJoystickCenter()\n})\n\njouter.addEventListener('pointerup', () => {\n  console.log('up')\n  resetJoystickCenter()\n})\n\ndocument.getElementById('btnfire').addEventListener('pointerdown', () => {\n  firing = true\n  send_turn = true\n})\ndocument.getElementById('btnfire').addEventListener('pointerover', (e) => {\n  if (e.pressure > 0) {\n    firing = true\n    send_turn = true\n  }\n})\n\ndocument.getElementById('btnfire').addEventListener('pointerout', () => {\n  firing = false\n  send_turn = true\n})\ndocument.getElementById('btnfire').addEventListener('pointerup', () => {\n  firing = false\n  send_turn = true\n})\n\ndocument.getElementById('btnbrake').addEventListener('pointerdown', () => {\n  brake = true\n  send_turn = true\n})\ndocument.getElementById('btnbrake').addEventListener('pointerover', (e) => {\n  if (e.pressure > 0) {\n    brake = true\n    send_turn = true\n  }\n})\n\ndocument.getElementById('btnbrake').addEventListener('pointerout', () => {\n  brake = false\n  send_turn = true\n})\ndocument.getElementById('btnbrake').addEventListener('pointerup', () => {\n  brake = false\n  send_turn = true\n})\n\nwindow.addEventListener('keydown', (e) => {\n  if (!token || dead) {\n    return\n  }\n\n  if (e.code == 'KeyW') {\n    accel = true\n    self.accel = accelStart = chron.timeMs()\n    send_turn = true\n  } else if (e.code == 'KeyS') {\n    brake = true\n    send_turn = true\n  } else if (e.code == 'KeyA') {\n    turn_left = true\n  } else if (e.code == 'KeyD') {\n    turn_right = true\n  } else if (e.code == 'Space') {\n    firing = true\n    send_turn = true\n  }\n}, true)\n\nwindow.addEventListener('keyup', (e) => {\n  if (!token || dead) {\n    return\n  }\n\n  if (e.code == 'KeyW') {\n    accel = false\n    self.accel = null\n    send_turn = true\n  } else if (e.code == 'KeyS') {\n    brake = false\n    send_turn = true\n  } else if (e.code == 'KeyA') {\n    turn_left_ramp = 0\n    turn_left = false\n  } else if (e.code == 'KeyD') {\n    turn_right_ramp = 0\n    turn_right = false\n  } else if (e.code == 'Space') {\n    firing = false\n    send_turn = true\n  }\n}, true)\n\nwindow.addEventListener('blur', () => {\n  if (!token || dead) {\n    return\n  }\n\n  accel = false\n  self.accel = null\n  brake = false\n  turn_left = false\n  turn_right = false\n  firing = false\n  send_turn = true\n}, true)\n\nwindow.addEventListener('beforeupload', () => {\n  send('disconnect')\n}, true)\n\nconst drawShip = (ship, scale) => {\n  const cx = ctx.canvas.width / 2\n  const cy = ctx.canvas.height / 2\n\n  const [p1, p2, p3, p4] = geom.getShipPoints(ship)\n  let [x1, y1] = p1\n  let [x2, y2] = p2\n  let [x3, y3] = p3\n  let [x4, y4] = p4\n  let [x0, y0] = [0, 0]\n\n  x0 = cx + (self.posX - ship.posX) * scale\n  x1 = cx + (self.posX - ship.posX + x1) * scale\n  x2 = cx + (self.posX - ship.posX + x2) * scale\n  x3 = cx + (self.posX - ship.posX + x3) * scale\n  x4 = cx + (self.posX - ship.posX + x4) * scale\n\n  y0 = cy + (self.posY - ship.posY) * scale\n  y1 = cy + (self.posY - ship.posY + y1) * scale\n  y2 = cy + (self.posY - ship.posY + y2) * scale\n  y3 = cy + (self.posY - ship.posY + y3) * scale\n  y4 = cy + (self.posY - ship.posY + y4) * scale\n\n  ctx.strokeStyle = '#fff'\n  ctx.beginPath()\n  ctx.moveTo(x1, y1)\n  ctx.lineTo(x2, y2)\n  ctx.lineTo(x3, y3)\n  ctx.lineTo(x4, y4)\n  ctx.lineTo(x1, y1)\n  ctx.stroke()\n\n  if (ship.accel) {\n    const [tp1, tp2, tp3, tp4, tp5] = geom.getThrusterPoints(ship)\n    let [x1, y1] = tp1\n    let [x2, y2] = tp2\n    let [x3, y3] = tp3\n    let [x4, y4] = tp4\n    let [x5, y5] = tp5\n\n    let xo = (Math.random() - 0.5) * scale / 4\n    let yo = (Math.random() - 0.5) * scale / 4\n\n    x1 = cx + (self.posX - ship.posX + x1) * scale\n    x2 = cx + (self.posX - ship.posX + x2) * scale\n    x3 = cx + (self.posX - ship.posX + x3) * scale\n    x4 = cx + (self.posX - ship.posX + x4) * scale\n    x5 = cx + (self.posX - ship.posX + x5) * scale\n  \n    y1 = cy + (self.posY - ship.posY + y1) * scale\n    y2 = cy + (self.posY - ship.posY + y2) * scale\n    y3 = cy + (self.posY - ship.posY + y3) * scale\n    y4 = cy + (self.posY - ship.posY + y4) * scale\n    y5 = cy + (self.posY - ship.posY + y5) * scale\n\n    x3 += xo\n    y3 += yo\n    x5 += xo / 2\n    y5 += yo / 2  \n\n    ctx.strokeStyle = '#888'\n    ctx.beginPath()\n    ctx.moveTo(x1, y1)\n    ctx.lineTo(x2, y2)\n    ctx.lineTo(x3, y3)\n    ctx.lineTo(x4, y4)\n    ctx.lineTo(x1, y1)\n    ctx.lineTo(x5, y5)\n    ctx.stroke()\n  }\n\n  ctx.font = '18px monospace'\n  ctx.fillStyle = 'rgba(255,255,255,0.75)'\n  ctx.textAlign = 'center'\n  ctx.fillText(ship.name, x0, y0 - 2.75 * scale)\n}\n\nconst drawBullet = (bullet, scale) => {\n  const cx = ctx.canvas.width / 2\n  const cy = ctx.canvas.height / 2\n\n  const x = cx + (self.posX - bullet.posX) * scale\n  const y = cy + (self.posY - bullet.posY) * scale\n\n  ctx.fillStyle = '#fff'\n  ctx.beginPath()\n  ctx.arc(x, y, 0.2 * scale, 0, 2 * Math.PI)\n  ctx.fill()\n}\n\nconst drawLine = (line, scale) => {\n  const { x, y, angle, r, alpha } = line\n  const cx = ctx.canvas.width / 2\n  const cy = ctx.canvas.height / 2\n\n  const x1 = cx + scale * (x + self.posX - line.xr - r * Math.cos(angle))\n  const y1 = cy + scale * (y + self.posY - line.yr - r * Math.sin(angle))\n  const x2 = cx + scale * (x + self.posX - line.xr + r * Math.cos(angle))\n  const y2 = cy + scale * (y + self.posY - line.yr + r * Math.sin(angle))\n\n  ctx.strokeStyle = `rgba(192,192,192,${alpha * 0.01})` \n  ctx.beginPath()\n  ctx.moveTo(x1, y1)\n  ctx.lineTo(x2, y2)\n  ctx.stroke()\n}\n\nconst createLine = (x1, y1, x2, y2, xr, yr, xv, yv) => {\n  const [x, y] = [(x1 + x2) / 2, (y1 + y2) / 2]\n  const angle = Math.atan2(x2 - x1, y2 - y1)\n  const r = Math.hypot(x2 - x1, y2 - y1) / 2\n  const vx = -0.05 + 0.1 * Math.random() - xv * tpf\n  const vy = -0.05 + 0.1 * Math.random() - yv * tpf\n  const vangle = -0.1 + 0.2 * Math.random()\n\n  // x, y, xr, yr, angle, r, alpha, vx, vy, vangle\n  return { x, y, xr, yr, angle, alpha: 100, r, vx, vy, vangle }\n}\n\nconst computePlanetAngle = (planet, angle, scale, cx, cy) => {\n  const x = planet.x + Math.sin(angle) * planet.radius\n  const y = planet.y + Math.cos(angle) * planet.radius\n\n  return [cx + (self.posX - x) * scale, cy + (self.posY - y) * scale]\n}\n\nconst drawPlanet = (planet, scale) => {\n  const cx = ctx.canvas.width / 2\n  const cy = ctx.canvas.height / 2\n  ctx.strokeStyle = '#fff'\n  ctx.lineWidth = 1\n\n  lcg.reseed(planet.seed)\n  const gon = Math.abs(lcg.randomInt()) % 24 + 14\n\n  let angle = lcg.randomOffset() * Math.PI * 2 + planetAngle * \n    (2 * (lcg.randomInt() & 1) - 1)\n  let [x, y] = computePlanetAngle(planet, angle, scale, cx, cy)\n\n  ctx.beginPath()\n  ctx.moveTo(x, y)\n  for (let i = 0; i < gon; ++i) {\n    angle += (2 * Math.PI) / gon;\n    [x, y] = computePlanetAngle(planet, angle, scale, cx, cy)\n    ctx.lineTo(x, y)\n  }\n  ctx.stroke()\n}\n\nconst explosion = (ship) => {\n  const [p1, p2, p3, p4] = geom.getShipPoints(ship)\n  let [x1, y1] = p1\n  let [x2, y2] = p2\n  let [x3, y3] = p3\n  let [x4, y4] = p4\n\n  let [x5, y5] = [(x1 + x2) / 2, (y1 + y2) / 2]\n  let [x6, y6] = [(x1 + x4) / 2, (y1 + y4) / 2]\n\n  lines.push(createLine(x1, y1, x5, y5, \n    ship.posX, ship.posY, ship.velX, ship.velY))\n  lines.push(createLine(x5, y5, x2, y2, \n    ship.posX, ship.posY, ship.velX, ship.velY))\n  lines.push(createLine(x2, y2, x3, y3, \n    ship.posX, ship.posY, ship.velX, ship.velY))\n  lines.push(createLine(x3, y3, x4, y4, \n    ship.posX, ship.posY, ship.velX, ship.velY))\n  lines.push(createLine(x4, y4, x6, y6, \n    ship.posX, ship.posY, ship.velX, ship.velY))\n  lines.push(createLine(x6, y6, x1, y1, \n    ship.posX, ship.posY, ship.velX, ship.velY))\n}\n\nconst frame = (time) => {\n  ctx.canvas.width = window.innerWidth\n  ctx.canvas.height = window.innerHeight\n  const cx = ctx.canvas.width / 2\n  const cy = ctx.canvas.height / 2\n  const unitSize = Math.min(ctx.canvas.width, ctx.canvas.height) * ((isMobile() ? 3/4 : 1/2) \n    / physics.MAX_BULLET_DISTANCE)\n\n  let delta = 0\n  if (last_partial != null) {\n    delta = time - last_partial\n    partialTick(delta)\n    if (dialogOpacity < 1) {\n      dialogOpacity = Math.min(1, dialogOpacity + delta / 250)\n      document.getElementById('dialogbox').style.opacity = dialogOpacity\n    }\n  }\n  last_partial = time\n\n  const xm = ((self.posX % GRID_SIZE) + GRID_SIZE) % GRID_SIZE\n  const ym = ((self.posY % GRID_SIZE) + GRID_SIZE) % GRID_SIZE\n\n  ctx.fillStyle = '#000'\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n\n  // draw grid\n  ctx.lineWidth = 1\n  ctx.strokeStyle = '#333'\n  for (let x = xm * unitSize; \n    x < ctx.canvas.width; \n    x += GRID_SIZE * unitSize) {\n    ctx.beginPath()\n    const dx = x | 0 + 0.5\n    ctx.moveTo(dx, 0)\n    ctx.lineTo(dx, ctx.canvas.height)\n    ctx.stroke()\n  }\n  for (let y = ym * unitSize; \n    y < ctx.canvas.height;\n    y += GRID_SIZE * unitSize) {\n    ctx.beginPath()\n    const dy = y | 0 + 0.5\n    ctx.moveTo(0, dy)\n    ctx.lineTo(ctx.canvas.width, dy)\n    ctx.stroke()\n  }\n\n  if (!self.dead) {\n    // draw red mask\n    const gradient = ctx.createRadialGradient(cx + self.posX * unitSize,\n      cy + self.posY * unitSize,\n      (rubber - 1) * unitSize,\n      cx + self.posX * unitSize,\n      cy + self.posY * unitSize,\n      (rubber + physics.RUBBERBAND_BUFFER - 1) * unitSize)\n    gradient.addColorStop(0, 'rgba(192,192,192,0)')\n    gradient.addColorStop(1, 'rgba(192,192,192,0.25)')\n    ctx.beginPath()\n    ctx.arc(cx + self.posX * unitSize, cy + self.posY * unitSize, \n      rubber * unitSize, 0, 2 * Math.PI)\n    ctx.rect(ctx.canvas.width, 0, -ctx.canvas.width, ctx.canvas.height)\n    ctx.fillStyle = gradient\n    ctx.fill()\n\n    // draw player ship\n    ctx.lineWidth = 1.5\n    drawShip(self, unitSize)\n\n    // draw ships\n    ctx.lineWidth = 1\n    for (const ship of ships) {\n      drawShip(ship, unitSize)\n    }\n\n    // draw bullets\n    for (const bullet of bullets) {\n      drawBullet(bullet, unitSize)\n    }\n  }\n\n  // draw planets\n  for (const planet of planets) {\n    drawPlanet(planet, unitSize)\n  }\n\n  // draw lines\n  for (const line of lines) {\n    drawLine(line, unitSize)\n\n    line.x += line.vx\n    line.y += line.vy\n    line.angle += line.vangle\n    line.vx *= 0.99\n    line.vy *= 0.99\n    line.vangle *= 0.99\n    line.alpha -= 1\n  }\n  lines = lines.filter(line => line.alpha > 0)\n\n  if (!self.dead) {\n  // draw black mask\n    const bgradient = ctx.createRadialGradient(cx, cy,\n      (physics.MAX_BULLET_DISTANCE - 1) * unitSize,\n      cx, cy,\n      (physics.MAX_BULLET_DISTANCE + 10) * unitSize)\n    bgradient.addColorStop(0, 'rgba(0,0,0,0)')\n    bgradient.addColorStop(0.5, 'rgba(0,0,0,0.2)')\n    bgradient.addColorStop(1, 'rgba(0,0,0,0.9)')\n    ctx.beginPath()\n    ctx.arc(cx, cy, \n      (physics.MAX_BULLET_DISTANCE - 1) * unitSize, 0, 2 * Math.PI)\n    ctx.rect(ctx.canvas.width, 0, -ctx.canvas.width, ctx.canvas.height)\n    ctx.fillStyle = bgradient\n    ctx.fill()\n\n    if (damageAlpha > 0) {\n      ctx.fillStyle = `rgba(128,0,0,${damageAlpha})`\n      ctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height)\n      ctx.fill()\n      if (time > damageGot && damageAlpha > 0) {\n        damageAlpha = Math.max(0, damageAlpha - delta / 800)\n      }\n    }\n  }\n\n  if (self.health < 0.3) {\n    document.getElementById('yourscore').style.color = (time % 1000) >= 500 ? '#f00' : '#fff'\n    document.getElementById('healthbarhealth').style.background = ((time + 250) % 1000) >= 500 ? '#800' : '#c00'\n  } else if (self.health < 0.7) {\n    document.getElementById('yourscore').style.color = '#fff'\n    const t = (self.health - 0.3) / 0.4 * 204\n    document.getElementById('healthbarhealth').style.background = `rgba(204,${t},${t})`\n  } else {\n    document.getElementById('yourscore').style.color = '#fff'\n    document.getElementById('healthbarhealth').style.background = '#ccc'\n  }\n\n  planetAngle += PLANET_SPIN_SPEED\n  planetAngle %= 2 * Math.PI\n  \n  window.requestAnimationFrame(frame)\n}\n\ndocument.getElementById('btnplay').addEventListener('click', () => joinGame())\ndocument.getElementById('btnfs').addEventListener('click', () => {\n  if (document.fullscreenElement) {\n    document.exitFullscreen()\n  } else {\n    document.documentElement.requestFullscreen()\n  }\n})\n\nwindow.requestAnimationFrame(frame)\n\nleaveGame()\nshowDialog()\nhideLose()\n","const GRAV = 6.67e-11\nconst TICKS_PER_SECOND = 24\nconst MAX_SHIP_VELOCITY = 48 / TICKS_PER_SECOND\nconst MIN_SHIP_VELOCITY = 0.01\nconst LATCH_VELOCITY = 0.2\nconst BULLET_VELOCITY = MAX_SHIP_VELOCITY * 1.75\nconst BRAKE_MUL = (MIN_SHIP_VELOCITY / MAX_SHIP_VELOCITY) ** (1 / (TICKS_PER_SECOND * 1.5))\nconst INERTIA_MUL = 1\n// (MIN_SHIP_VELOCITY / MAX_SHIP_VELOCITY) ** (1 / (TICKS_PER_SECOND * 90))\nconst MAX_BULLET_DISTANCE = 50\nconst DELAY_BETWEEN_BULLETS_MS = 250\nconst RUBBERBAND_BUFFER = 80\nconst LCG = require('./utils/lcg')\nconst PLANET_CHUNK_SIZE = MAX_BULLET_DISTANCE * 2 + 1\n\nlet PLANET_SEED = 1340985553\n\nconst getAccelMul = (accelTimeMs) => { // time in milliseconds\n  return 0.05 + 0.000025 * accelTimeMs\n}\n\nconst checkMinVelocity = (ship) => {\n  const v = Math.hypot(ship.velX, ship.velY)\n  if (v <= MIN_SHIP_VELOCITY) {\n    ship.velX = 0\n    ship.velY = 0\n  }\n}\n\nconst checkMaxVelocity = (ship) => {\n  const maxvel = MAX_SHIP_VELOCITY * healthToVelocity(ship.health)\n  const v = Math.hypot(ship.velX, ship.velY)\n  if (v > maxvel) {\n    ship.velX *= maxvel / v\n    ship.velY *= maxvel / v\n  }\n}\n\nconst getPlanetSeed = () => {\n  return PLANET_SEED\n}\n\nconst setPlanetSeed = (seed) => {\n  PLANET_SEED = seed\n}\n\nconst newPlanetSeed = () => {\n  PLANET_SEED = Math.floor(Math.random() * 2147483647)\n}\n\n// planet: x, y, radius, seed\nconst getPlanetsForChunk = (cx, cy) => {\n  const r = PLANET_CHUNK_SIZE\n  const lcg = new LCG((PLANET_SEED ^ (cx * 1173320513) ^ (cy * 891693747)) & 0xFFFFFFFF)\n  const xb = (cx + 0.5) * r\n  const yb = (cy + 0.5) * r\n  \n  const xo = lcg.randomOffset() * (r / 4)\n  const yo = lcg.randomOffset() * (r / 4)\n  const radius = (r / 24) + (r / 8) * lcg.random()\n  const seed = lcg.randomInt()\n  return [ { x: xb + xo, y: yb + yo, radius, seed } ]\n}\n\nconst getPlanets = (x, y) => {\n  const x1 = Math.floor((x - MAX_BULLET_DISTANCE) / PLANET_CHUNK_SIZE)\n  const x2 = Math.floor(x / PLANET_CHUNK_SIZE)\n  const x3 = Math.floor((x + MAX_BULLET_DISTANCE) / PLANET_CHUNK_SIZE)\n  const y1 = Math.floor((y - MAX_BULLET_DISTANCE) / PLANET_CHUNK_SIZE)\n  const y2 = Math.floor(y / PLANET_CHUNK_SIZE)\n  const y3 = Math.floor((y + MAX_BULLET_DISTANCE) / PLANET_CHUNK_SIZE)\n\n  const xu = []\n  const yu = []\n  let planets = []\n\n  xu.push(x2)\n  if (x1 != x2) {\n    xu.push(x1)\n  }\n  if (x2 != x3) {\n    xu.push(x3)\n  }\n\n  yu.push(y2)\n  if (y1 != y2) {\n    yu.push(y1)\n  }\n  if (y2 != y3) {\n    yu.push(y3)\n  }\n\n  for (const x of xu) {\n    for (const y of yu) {\n      planets = [...planets, ...getPlanetsForChunk(x, y)]\n    }\n  }\n  \n  return planets\n}\n\nconst accel = (ship, accelTimeMs) => {\n  const accelMul = getAccelMul(accelTimeMs) * healthToVelocity(ship.health)\n  ship.velX += accelMul * Math.sin(-ship.orient)\n  ship.velY += accelMul * Math.cos(-ship.orient)\n  checkMaxVelocity(ship)\n}\n\nconst inertia = (ship) => {\n  ship.velX *= INERTIA_MUL\n  ship.velY *= INERTIA_MUL\n  checkMinVelocity(ship)\n}\n\nconst brake = (ship) => {\n  ship.velX *= BRAKE_MUL\n  ship.velY *= BRAKE_MUL\n  checkMinVelocity(ship)\n}\n\nconst recoil = (ship) => {\n  ship.velX -= 0.02 * Math.sin(-ship.orient)\n  ship.velY -= 0.02 * Math.cos(-ship.orient)\n  checkMaxVelocity(ship)\n}\n\nconst gravityBullet = (bullet, planets) => {\n  for (const planet of planets) {\n    const d = Math.hypot(bullet.posX - planet.x, bullet.posY - planet.y)\n    if (d > (planet.radius + 1.2) && d < planet.radius * 3) {\n      const dx = planet.x - bullet.posX\n      const dy = planet.y - bullet.posY\n      const r2 = Math.hypot(dx, dy) ** 2\n      const f = GRAV * 8e+9 / r2 * planet.radius\n      bullet.velX += f * dx\n      bullet.velY += f * dy\n    }\n  }\n  const d = Math.hypot(bullet.velX, bullet.velY)\n  bullet.velX *= BULLET_VELOCITY / d\n  bullet.velY *= BULLET_VELOCITY / d\n}\n\nconst gravityShip = (ship, planets) => {\n  for (const planet of planets) {\n    const d = Math.hypot(ship.posX - planet.x, ship.posY - planet.y)\n    if (d > (planet.radius + 1) && d < planet.radius * 3) {\n      const dx = planet.x - ship.posX\n      const dy = planet.y - ship.posY\n      const r2 = Math.hypot(dx, dy) ** 2\n      const f = GRAV * 8e+8 * planet.radius / r2 / (\n        (ship.accel !== null || ship.brake !== null) ? 5 : 1)\n      ship.velX += f * dx\n      ship.velY += f * dy\n    }\n  }\n  checkMaxVelocity(ship)\n}\n\nconst getRubberbandRadius = (playerCount) => {\n  return 75 * Math.pow(Math.max(playerCount, 1), 0.75)\n}\n\nconst rubberband = (ship, radius) => {\n  const distCenter = Math.hypot(ship.posX, ship.posY)\n  if (distCenter > radius) {\n    const maxRadius = radius + RUBBERBAND_BUFFER\n    const baseX = -ship.posX / Math.hypot(ship.posX, ship.posY)\n    const baseY = -ship.posY / Math.hypot(ship.posX, ship.posY)\n    if (distCenter > maxRadius) {\n      ship.velX = ship.velY = 0\n    }\n    ship.velX += baseX * 0.3 * MAX_SHIP_VELOCITY *\n      (1.1 * (distCenter - radius) / (maxRadius - radius)) ** 8\n    ship.velY += baseY * 0.3 * MAX_SHIP_VELOCITY *\n      (1.1 * (distCenter - radius) / (maxRadius - radius)) ** 8\n    checkMaxVelocity(ship)\n  }\n}\n\nconst healthToVelocity = (health) => {\n  return 0.6 + 0.4 * Math.pow(health, 1.5)\n}\n\nmodule.exports = {\n  TICKS_PER_SECOND,\n  MAX_SHIP_VELOCITY,\n  BULLET_VELOCITY,\n  LATCH_VELOCITY,\n  MAX_BULLET_DISTANCE,\n  DELAY_BETWEEN_BULLETS_MS,\n  RUBBERBAND_BUFFER,\n  accel,\n  inertia,\n  brake,\n  recoil,\n  gravityBullet,\n  gravityShip,\n  rubberband,\n  getPlanets,\n  getPlanetSeed,\n  setPlanetSeed,\n  newPlanetSeed,\n  getRubberbandRadius,\n  healthToVelocity }\n","const timeMs = () => new Date().getTime()\n\nmodule.exports = { timeMs }\n","const EPSILON = 1e-10\n\nconst pointInTriangle = (p1, p2, p3, p) => {\n  const [x1, y1] = p1\n  const [x2, y2] = p2\n  const [x3, y3] = p3\n  const [xp, yp] = p\n\n  const c1 = ((y2 - y3) * (xp - x3) + (x3 - x2) * (yp - y3)) \n           / ((y2 - y3) * (x1 - x3) + (x3 - x2) * (y1 - y3))\n  const c2 = ((y3 - y1) * (xp - x3) + (x1 - x3) * (yp - y3)) \n           / ((y2 - y3) * (x1 - x3) + (x3 - x2) * (y1 - y3))\n  const c3 = 1 - c1 - c2\n  return c1 > 0 && c2 > 0 && c3 > 0\n}\n\nconst handleZeroEpsilon = (x) => {\n  return Math.abs(x) < EPSILON ? 0 : x\n}\n\nconst pointOrientation = (p, q, r) => {\n  return Math.sign(handleZeroEpsilon(\n    (q[1] - p[1]) * (r[0] - q[0])\n    - (q[0] - p[0]) * (r[1] - q[1])))\n}\n\nconst onCollinearSegment = (p, q, r) => {\n  return (q[0] <= Math.max(p[0], r[0])) && (q[0] >= Math.min(p[0], r[0]))\n    && (q[1] <= Math.max(p[1], r[1])) && (q[1] >= Math.min(p[1], r[1]))\n}\n\nconst lineIntersectsLine = (a1, a2, b1, b2) => {\n  const o1 = pointOrientation(a1, b1, a2)\n  const o2 = pointOrientation(a1, b1, b2)\n  const o3 = pointOrientation(a2, b2, a1)\n  const o4 = pointOrientation(a2, b2, b1)\n\n  if (o1 !== o2 && o3 !== o4) {\n    return true\n  }\n\n  return (o1 == 0 && onCollinearSegment(a1, a2, b1))\n    || (o2 == 0 && onCollinearSegment(a1, b2, b1))\n    || (o3 == 0 && onCollinearSegment(a2, a1, b2))\n    || (o4 == 0 && onCollinearSegment(a2, b1, b2))\n}\n\nconst lineIntersectsTriangle = (l1, l2, t1, t2, t3) => {\n  return lineIntersectsLine(l1, l2, t1, t2)\n    || lineIntersectsLine(l1, l2, t2, t3)\n    || lineIntersectsLine(l1, l2, t3, t1)\n}\n\nconst wrapRadianAngle = (angle) => {\n  return (angle + Math.PI) % (2 * Math.PI) - Math.PI\n}\n\nconst getPlanetAngleMultiplier = (orient, vel) => {\n  let diff = Math.abs((orient - vel + Math.PI) % (2 * Math.PI))\n  if (Math.abs(diff) > Math.PI) {\n    diff = (2 * Math.PI) - Math.PI\n  }\n  const sc = diff / Math.PI\n  return 1 + sc\n}\n\nconst rotatePoint = (s, c, x, y) => [x * c - y * s, x * s + y * c]\n\nconst rotatePointOffset = (s, c, x, y, xo, yo) => \n  [xo + x * c - y * s, yo + x * s + y * c]\n\nconst getShipPoints = (ship) => {\n  if (!ship) {\n    return []\n  }\n\n  const s = Math.sin(ship.orient)\n  const c = Math.cos(ship.orient)\n\n  return [\n    rotatePoint(s, c,  0   , -1   ),\n    rotatePoint(s, c, +1   , +1.5 ),\n    rotatePoint(s, c,  0   , +1   ),\n    rotatePoint(s, c, -1   , +1.5 )\n  ]\n}\n\nconst getRealShipPoints = (ship) => {\n  if (!ship) {\n    return []\n  }\n\n  const points = getShipPoints(ship)\n  return [\n    [points[0][0] + ship.posX, points[0][1] + ship.posY],\n    [points[1][0] + ship.posX, points[1][1] + ship.posY],\n    [points[2][0] + ship.posX, points[2][1] + ship.posY],\n    [points[3][0] + ship.posX, points[3][1] + ship.posY]\n  ]\n}\n\nconst getCollisionPoints = (ship) => {\n  if (!ship) {\n    return []\n  }\n\n  const s = Math.sin(ship.orient)\n  const c = Math.cos(ship.orient)\n  \n  return [\n    rotatePointOffset(s, c,  0   , 0    , ship.posX, ship.posY),\n    rotatePointOffset(s, c, +0.83, +1.25, ship.posX, ship.posY),\n    rotatePointOffset(s, c, -0.83, +1.25, ship.posX, ship.posY)\n  ]\n}\n\nconst getThrusterPoints = (ship) => {\n  if (!ship) {\n    return []\n  }\n\n  const s = Math.sin(ship.orient)\n  const c = Math.cos(ship.orient)\n\n  return [\n    rotatePoint(s, c,  0   , +1   ),\n    rotatePoint(s, c, +0.5 , +1.25),\n    rotatePoint(s, c,  0   , +2.5 ),\n    rotatePoint(s, c, -0.5 , +1.25),\n    rotatePoint(s, c,  0   , +1.75),\n  ]\n}\n\nmodule.exports = { \n  pointInTriangle,\n  lineIntersectsLine,\n  lineIntersectsTriangle,\n  wrapRadianAngle,\n  getPlanetAngleMultiplier,\n  getShipPoints,\n  getRealShipPoints,\n  getCollisionPoints,\n  getThrusterPoints }\n","const LCG_A = 535426113\nconst LCG_C = 2258250855\n\nclass Generator {\n  constructor(seed) {\n    this.seed = seed & 0xFFFFFFFF\n  }\n\n  reseed(seed) {\n    this.seed = seed & 0xFFFFFFFF\n  }\n\n  randomInt() {\n    const val = this.seed\n    this.seed = (LCG_A * val + LCG_C) & 0xFFFFFFFF\n    return val\n  }\n\n  random() {\n    let v = this.randomInt() / (2.0 ** 32)\n    if (v < 0) {\n      v += 1\n    }\n    return v\n  }\n\n  randomOffset() {\n    return 2 * this.random() - 1\n  }\n}\n\nmodule.exports = Generator\n"],"sourceRoot":""}